<!DOCTYPE html>
<html>
  <head>
    <title>HotelApp</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <body>
    <header class="header">
      <div class="header-left-nav">
          <a href="/"><img class="logo-img" alt="サイトのロゴ画像" width="300px" src="/assets/logo.jpeg"></a>
        <div class="search_area">
          <%= form_with url: search_rooms_path, method: :get, local: true do |f| %>
            <%= f.text_field :area, value: @area, :placeholder => "エリア", class:"search_box" %>
          <% end %>
        </div>
        <div class="search_keyword">
          <%= form_with url: search_rooms_path, method: :get, local: true do |f| %>
            <%= f.text_field :keyword, value: @keyword, :placeholder => "キーワード", class:"search_box" %>
          <% end %>
        </div>
      </div>

      <div class="header-right-nav">
        <div onclick="obj=document.getElementById('open').style; obj.display=(obj.display=='none')?'block':'none';">
          <% if user_signed_in? %>
            <div class="nav-item">
              <span class="user_name"><%= current_user.name %></span>
              <% if current_user.image? %>
                <%= image_tag current_user.image.url, :size => '60x60' %>
              <% else %>
                <%= image_tag "/assets/default.jpg", :size => '60x60' %>
              <% end %>
            </div>
        </div>
        <div id="open" style="display:none;clear:both;">
          <ul class="dropdown-menu">
            <li><%= link_to "ルーム登録", :new_room %></li>
            <li><%= link_to "予約済みルーム一覧", :reservations %></li>
            <li><%= link_to "登録済みルーム一覧", :posts_rooms %></li>
            <li><%= link_to "設定", :profile_users %></li>
            <li><%= link_to 'ログアウト', destroy_user_session_path, method: :delete %></li>
          </ul>
        </div>
        <div class="nav-item">
          <% else %>
            <a class="log-in" href="/users/sign_in">ログイン</a>
            <a class="registration" href="/users/sign_up">登録する</a>
          <% end %>  
        </div>
      </div>
    </header>

    <%= yield %>

    <footer>
      <宿泊施設予約あぷり>
    </footer>
  </body>
</html>
